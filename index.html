<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÌÖåÌä∏Î¶¨Ïä§ Í≤åÏûÑ</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@700&display=swap" rel="stylesheet">
    <style>
        @keyframes camelWalk {
            from { transform: translateX(100vw); }
            to { transform: translateX(-100%); }
        }
        .animate-camel-walk {
            animation: camelWalk 30s linear infinite;
        }
        .game-title {
            font-family: 'Gaegu', cursive;
            font-weight: 700;
        }
        @keyframes wheelSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .wheel-spin {
            animation: wheelSpin var(--spin-speed, 2s) linear infinite;
        }
        @keyframes blockFall {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(20px); opacity: 0.3; }
        }
        .block-fall {
            animation: blockFall 0.5s ease-out forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        const BOARD_WIDTH = 10;
        const BOARD_HEIGHT = 20;
        const CELL_SIZE = 25;

        const SPEED_OPTIONS = {
            slow: { label: 'ÎäêÎ¶º', interval: 1500 },
            normal: { label: 'Î≥¥ÌÜµ', interval: 1000 },
            fast: { label: 'Îπ†Î¶Ñ', interval: 500 }
        };

        const TETROMINOS = {
            I: { shape: [[1, 1, 1, 1]], color: 'bg-cyan-500 shadow-lg' },
            O: { shape: [[1, 1], [1, 1]], color: 'bg-yellow-500 shadow-lg' },
            T: { shape: [[0, 1, 0], [1, 1, 1]], color: 'bg-purple-500 shadow-lg' },
            S: { shape: [[0, 1, 1], [1, 1, 0]], color: 'bg-green-500 shadow-lg' },
            Z: { shape: [[1, 1, 0], [0, 1, 1]], color: 'bg-red-500 shadow-lg' },
            J: { shape: [[1, 0, 0], [1, 1, 1]], color: 'bg-blue-500 shadow-lg' },
            L: { shape: [[0, 0, 1], [1, 1, 1]], color: 'bg-orange-500 shadow-lg' }
        };

        const createEmptyBoard = () => 
            Array.from({ length: BOARD_HEIGHT }, () => Array(BOARD_WIDTH).fill(null));

        // ÎûúÎç§ ÏãúÏûë Î≥¥Îìú ÏÉùÏÑ± (30-50% Ï±ÑÏõåÏßê)
        const createRandomBoard = () => {
            const newBoard = createEmptyBoard();
            const fillHeight = Math.floor(Math.random() * 4) + 6; // 6~9Ï§Ñ Ï±ÑÏö∞Í∏∞ (30~45%)
            const colors = ['bg-cyan-500', 'bg-yellow-500', 'bg-purple-500', 'bg-green-500', 'bg-red-500', 'bg-blue-500', 'bg-orange-500'];
            
            // ÎèôÎ¨º Î™®Ïñë Ìå®ÌÑ¥Îì§
            const patterns = [
                // ÌÜ†ÎÅº
                [[0,1,0,1,0], [1,1,1,1,1], [1,0,1,0,1], [0,1,1,1,0]],
                // ÏÉà
                [[0,1,0], [1,1,1], [0,1,0], [1,0,1]],
                // Î¨ºÍ≥†Í∏∞
                [[0,1,0], [1,1,1], [1,1,1], [0,1,0]],
                // ÎÇòÎπÑ
                [[1,0,1], [1,1,1], [0,1,0], [1,0,1]],
                // ÌïòÌä∏
                [[0,1,0,1,0], [1,1,1,1,1], [1,1,1,1,1], [0,1,1,1,0], [0,0,1,0,0]],
            ];
            
            // ÏïÑÎûòÎ∂ÄÌÑ∞ Ï±ÑÏö∞Í∏∞
            for (let y = BOARD_HEIGHT - 1; y >= BOARD_HEIGHT - fillHeight; y--) {
                for (let x = 0; x < BOARD_WIDTH; x++) {
                    // 60% ÌôïÎ•†Î°ú Î∏îÎ°ù Î∞∞Ïπò
                    if (Math.random() < 0.6) {
                        newBoard[y][x] = colors[Math.floor(Math.random() * colors.length)] + ' shadow-lg';
                    }
                }
            }
            
            // ÎûúÎç§ÌïòÍ≤å 2~3Í∞úÏùò ÎèôÎ¨º Î™®Ïñë Ï∂îÍ∞Ä
            const numPatterns = Math.floor(Math.random() * 2) + 2;
            for (let p = 0; p < numPatterns; p++) {
                const pattern = patterns[Math.floor(Math.random() * patterns.length)];
                const color = colors[Math.floor(Math.random() * colors.length)] + ' shadow-lg';
                const startX = Math.floor(Math.random() * (BOARD_WIDTH - pattern[0].length));
                const startY = BOARD_HEIGHT - fillHeight + Math.floor(Math.random() * Math.min(5, fillHeight - pattern.length));
                
                // Ìå®ÌÑ¥ Î∞∞Ïπò
                for (let py = 0; py < pattern.length && startY + py < BOARD_HEIGHT; py++) {
                    for (let px = 0; px < pattern[py].length && startX + px < BOARD_WIDTH; px++) {
                        if (pattern[py][px] === 1) {
                            newBoard[startY + py][startX + px] = color;
                        }
                    }
                }
            }
            
            return newBoard;
        };

        const Tetris = () => {
            const [board, setBoard] = useState(createEmptyBoard());
            const [currentPiece, setCurrentPiece] = useState(null);
            const [nextPiece, setNextPiece] = useState(null);
            const [position, setPosition] = useState({ x: 0, y: 0 });
            const [gameOver, setGameOver] = useState(false);
            const [score, setScore] = useState(0);
            const [isPaused, setIsPaused] = useState(false);
            const [gameStarted, setGameStarted] = useState(false);
            const [speed, setSpeed] = useState('normal');
            const [linesCleared, setLinesCleared] = useState(0);
            const [showLevelUp, setShowLevelUp] = useState(false);
            const [currentInterval, setCurrentInterval] = useState(1000);
            const [level, setLevel] = useState(1);
            const [scoreHistory, setScoreHistory] = useState([]);
            const [highScore, setHighScore] = useState({ score: 0, level: 0 });
            const [gameOverAnimation, setGameOverAnimation] = useState(false);
            const [gameOverAnimation, setGameOverAnimation] = useState(false);

            // ÌòÑÏû¨ ÏãúÍ∞Ñ Í∏∞Î∞òÏúºÎ°ú ÎÇÆ/Î∞§ ÌåêÎã® (6-18Ïãú: ÎÇÆ, ÎÇòÎ®∏ÏßÄ: Î∞§)
            const currentHour = new Date().getHours();
            const isDaytime = currentHour >= 6 && currentHour < 18;

            const getRandomPiece = () => {
                const pieces = Object.keys(TETROMINOS);
                const randomPiece = pieces[Math.floor(Math.random() * pieces.length)];
                return {
                    shape: TETROMINOS[randomPiece].shape,
                    color: TETROMINOS[randomPiece].color
                };
            };

            const checkCollision = useCallback((piece, pos, currentBoard) => {
                for (let y = 0; y < piece.shape.length; y++) {
                    for (let x = 0; x < piece.shape[y].length; x++) {
                        if (piece.shape[y][x]) {
                            const newY = pos.y + y;
                            const newX = pos.x + x;
                            
                            if (newX < 0 || newX >= BOARD_WIDTH || newY >= BOARD_HEIGHT) {
                                return true;
                            }
                            
                            if (newY >= 0 && currentBoard[newY][newX]) {
                                return true;
                            }
                        }
                    }
                }
                return false;
            }, []);

            const rotate = (matrix) => {
                const rotated = matrix[0].map((_, i) => 
                    matrix.map(row => row[i]).reverse()
                );
                return rotated;
            };

            const rotateCounterClockwise = (matrix) => {
                const rotated = matrix[0].map((_, i) => 
                    matrix.map(row => row[matrix[0].length - 1 - i])
                );
                return rotated;
            };

            const mergePieceToBoard = useCallback(() => {
                const newBoard = board.map(row => [...row]);
                
                currentPiece.shape.forEach((row, y) => {
                    row.forEach((cell, x) => {
                        if (cell) {
                            const boardY = position.y + y;
                            const boardX = position.x + x;
                            if (boardY >= 0 && boardY < BOARD_HEIGHT) {
                                newBoard[boardY][boardX] = currentPiece.color;
                            }
                        }
                    });
                });

                return newBoard;
            }, [board, currentPiece, position]);

            const clearLines = useCallback((currentBoard) => {
                let linesClearedCount = 0;
                const newBoard = currentBoard.filter(row => {
                    if (row.every(cell => cell !== null)) {
                        linesClearedCount++;
                        return false;
                    }
                    return true;
                });

                while (newBoard.length < BOARD_HEIGHT) {
                    newBoard.unshift(Array(BOARD_WIDTH).fill(null));
                }

                return { newBoard, linesCleared: linesClearedCount };
            }, []);

            const spawnNewPiece = useCallback(() => {
                const newPiece = nextPiece || getRandomPiece();
                const startX = Math.floor(BOARD_WIDTH / 2) - Math.floor(newPiece.shape[0].length / 2);
                const startPos = { x: startX, y: 0 };

                if (checkCollision(newPiece, startPos, board)) {
                    setGameOver(true);
                    setGameOverAnimation(true);
                    // Í≤åÏûÑ Ïò§Î≤Ñ Ïãú ÌòÑÏû¨ Ï†êÏàòÎ•º ÌûàÏä§ÌÜ†Î¶¨Ïóê Ï∂îÍ∞Ä
                    setScoreHistory(prev => {
                        const newHistory = [...prev, { score, level }];
                        return newHistory.slice(-5); // ÏµúÍ∑º 5Í∞úÎßå Ïú†ÏßÄ
                    });
                    // ÏµúÍ≥† Ï†êÏàò ÏóÖÎç∞Ïù¥Ìä∏
                    setHighScore(prev => {
                        if (score > prev.score) {
                            return { score, level };
                        }
                        return prev;
                    });
                    return;
                }

                setCurrentPiece(newPiece);
                setNextPiece(getRandomPiece());
                setPosition(startPos);
            }, [board, checkCollision, nextPiece, score, level]);

            const moveDown = useCallback(() => {
                if (!currentPiece || gameOver || isPaused || showLevelUp) return;

                const newPos = { ...position, y: position.y + 1 };

                if (checkCollision(currentPiece, newPos, board)) {
                    const mergedBoard = mergePieceToBoard();
                    const { newBoard, linesCleared: linesClearedCount } = clearLines(mergedBoard);
                    
                    setBoard(newBoard);
                    setScore(prev => prev + linesClearedCount * 100);
                    setLinesCleared(prev => {
                        const newTotal = prev + linesClearedCount;
                        if (newTotal >= 20 && newTotal % 20 < linesClearedCount) {
                            setShowLevelUp(true);
                            setIsPaused(true);
                        }
                        return newTotal;
                    });
                    spawnNewPiece();
                } else {
                    setPosition(newPos);
                }
            }, [currentPiece, position, board, gameOver, isPaused, showLevelUp, checkCollision, mergePieceToBoard, clearLines, spawnNewPiece]);

            const softDrop = useCallback(() => {
                if (!currentPiece || gameOver || isPaused || showLevelUp) return;
                moveDown();
            }, [currentPiece, gameOver, isPaused, showLevelUp, moveDown]);

            // Ï†êÏàò Ìè¨Îß∑ÌåÖ Ìï®Ïàò
            const formatScore = (score) => {
                return score.toLocaleString();
            };

            // ÏÜçÎèÑ ÌçºÏÑºÌä∏ Í≥ÑÏÇ∞ Ìï®Ïàò
            const getSpeedPercent = () => {
                const baseSpeed = SPEED_OPTIONS[speed].interval;
                const speedRatio = baseSpeed / currentInterval;
                return Math.round(speedRatio * 100);
            };

            const moveHorizontal = useCallback((direction) => {
                if (!currentPiece || gameOver || isPaused || showLevelUp) return;

                const newPos = { ...position, x: position.x + direction };

                if (!checkCollision(currentPiece, newPos, board)) {
                    setPosition(newPos);
                }
            }, [currentPiece, position, board, gameOver, isPaused, showLevelUp, checkCollision]);

            const rotatePiece = useCallback(() => {
                if (!currentPiece || gameOver || isPaused || showLevelUp) return;

                const rotated = { ...currentPiece, shape: rotate(currentPiece.shape) };

                if (!checkCollision(rotated, position, board)) {
                    setCurrentPiece(rotated);
                }
            }, [currentPiece, position, board, gameOver, isPaused, showLevelUp, checkCollision]);

            const rotatePieceCounterClockwise = useCallback(() => {
                if (!currentPiece || gameOver || isPaused || showLevelUp) return;

                const rotated = { ...currentPiece, shape: rotateCounterClockwise(currentPiece.shape) };

                if (!checkCollision(rotated, position, board)) {
                    setCurrentPiece(rotated);
                }
            }, [currentPiece, position, board, gameOver, isPaused, showLevelUp, checkCollision]);

            const hardDrop = useCallback(() => {
                if (!currentPiece || gameOver || isPaused || showLevelUp) return;

                let newPos = { ...position };
                while (!checkCollision(currentPiece, { ...newPos, y: newPos.y + 1 }, board)) {
                    newPos.y++;
                }

                const newBoard = board.map(row => [...row]);
                
                currentPiece.shape.forEach((row, y) => {
                    row.forEach((cell, x) => {
                        if (cell) {
                            const boardY = newPos.y + y;
                            const boardX = newPos.x + x;
                            if (boardY >= 0 && boardY < BOARD_HEIGHT) {
                                newBoard[boardY][boardX] = currentPiece.color;
                            }
                        }
                    });
                });

                const { newBoard: clearedBoard, linesCleared: linesClearedCount } = clearLines(newBoard);
                
                setBoard(clearedBoard);
                setScore(prev => prev + linesClearedCount * 100 + 10);
                setLinesCleared(prev => {
                    const newTotal = prev + linesClearedCount;
                    if (newTotal >= 20 && newTotal % 20 < linesClearedCount) {
                        setShowLevelUp(true);
                        setIsPaused(true);
                    }
                    return newTotal;
                });
                spawnNewPiece();
            }, [currentPiece, position, board, gameOver, isPaused, showLevelUp, checkCollision, clearLines, spawnNewPiece]);

            useEffect(() => {
                const handleKeyPress = (e) => {
                    if (!gameStarted) return;
                    
                    switch (e.key) {
                        case 'ArrowLeft':
                            e.preventDefault();
                            moveHorizontal(-1);
                            break;
                        case 'ArrowRight':
                            e.preventDefault();
                            moveHorizontal(1);
                            break;
                        case 'ArrowDown':
                            e.preventDefault();
                            rotatePieceCounterClockwise();
                            break;
                        case 'ArrowUp':
                            e.preventDefault();
                            rotatePiece();
                            break;
                        case ' ':
                            e.preventDefault();
                            hardDrop();
                            break;
                        case 'p':
                        case 'P':
                            setIsPaused(prev => !prev);
                            break;
                    }
                };

                window.addEventListener('keydown', handleKeyPress);
                return () => window.removeEventListener('keydown', handleKeyPress);
            }, [moveHorizontal, rotatePiece, rotatePieceCounterClockwise, hardDrop, gameStarted]);

            useEffect(() => {
                if (!gameStarted || gameOver || isPaused || showLevelUp) return;

                const interval = setInterval(moveDown, currentInterval);
                return () => clearInterval(interval);
            }, [moveDown, gameOver, isPaused, gameStarted, showLevelUp, currentInterval]);

            const startGame = () => {
                setBoard(createEmptyBoard());
                setScore(0);
                setLinesCleared(0);
                setLevel(1);
                setGameOver(false);
                setGameOverAnimation(false);
                setIsPaused(false);
                setShowLevelUp(false);
                setGameStarted(true);
                setCurrentInterval(SPEED_OPTIONS[speed].interval);
                const newPiece = getRandomPiece();
                const nextNewPiece = getRandomPiece();
                setCurrentPiece(newPiece);
                setNextPiece(nextNewPiece);
                setPosition({ 
                    x: Math.floor(BOARD_WIDTH / 2) - Math.floor(newPiece.shape[0].length / 2), 
                    y: 0 
                });
            };

            const startRandomGame = () => {
                setBoard(createRandomBoard());
                setScore(0);
                setLinesCleared(0);
                setLevel(1);
                setGameOver(false);
                setGameOverAnimation(false);
                setIsPaused(false);
                setShowLevelUp(false);
                setGameStarted(true);
                setCurrentInterval(SPEED_OPTIONS[speed].interval);
                const newPiece = getRandomPiece();
                const nextNewPiece = getRandomPiece();
                setCurrentPiece(newPiece);
                setNextPiece(nextNewPiece);
                setPosition({ 
                    x: Math.floor(BOARD_WIDTH / 2) - Math.floor(newPiece.shape[0].length / 2), 
                    y: 0 
                });
            };

            const resetGame = () => {
                setBoard(createEmptyBoard());
                setCurrentPiece(null);
                setNextPiece(null);
                setPosition({ x: 0, y: 0 });
                setScore(0);
                setLinesCleared(0);
                setLevel(1);
                setGameOver(false);
                setGameOverAnimation(false);
                setIsPaused(false);
                setShowLevelUp(false);
                setGameStarted(false);
                setCurrentInterval(SPEED_OPTIONS[speed].interval);
            };

            const continueGame = () => {
                setShowLevelUp(false);
                setIsPaused(false);
            };

            const increaseSpeed = () => {
                setCurrentInterval(prev => Math.max(100, Math.round(prev * 0.8)));
                setLevel(prev => prev + 1);
                setShowLevelUp(false);
                setIsPaused(false);
            };

            const renderBoard = () => {
                const displayBoard = board.map(row => [...row]);

                if (currentPiece && !gameOver) {
                    currentPiece.shape.forEach((row, y) => {
                        row.forEach((cell, x) => {
                            if (cell) {
                                const boardY = position.y + y;
                                const boardX = position.x + x;
                                if (boardY >= 0 && boardY < BOARD_HEIGHT && boardX >= 0 && boardX < BOARD_WIDTH) {
                                    displayBoard[boardY][boardX] = currentPiece.color;
                                }
                            }
                        });
                    });
                }

                return displayBoard;
            };

            // Î∞∞Í≤ΩÏÉâ ÏÑ§Ï†ï
            const bgGradient = isDaytime 
                ? 'from-yellow-300 via-orange-200 to-yellow-400'
                : 'from-indigo-900 via-purple-900 to-blue-900';

            const sandColor1 = isDaytime ? 'from-yellow-600 to-yellow-400' : 'from-gray-700 to-gray-600';
            const sandColor2 = isDaytime ? 'from-yellow-500 to-yellow-300' : 'from-gray-600 to-gray-500';
            const sandColor3 = isDaytime ? 'from-orange-600 to-orange-400' : 'from-gray-800 to-gray-700';

            return (
                <div className={`relative flex flex-col items-center justify-center min-h-screen bg-gradient-to-b ${bgGradient} text-white p-2 overflow-hidden`}>
                    {/* ÌÉúÏñë ÎòêÎäî Îã¨ */}
                    {isDaytime ? (
                        <div className="absolute top-10 right-20 w-24 h-24 bg-yellow-400 rounded-full opacity-80 shadow-2xl"></div>
                    ) : (
                        <div className="absolute top-10 right-20 w-24 h-24 bg-gray-300 rounded-full opacity-70 shadow-2xl">
                            <div className="absolute top-2 right-2 w-20 h-20 bg-indigo-900 rounded-full"></div>
                        </div>
                    )}
                    
                    {/* ÏÇ¨Îßâ Î™®Îûò Ïñ∏ÎçïÎì§ */}
                    <div className={`absolute bottom-0 left-0 right-0 h-64 bg-gradient-to-t ${sandColor1} rounded-t-full transform scale-x-150`}></div>
                    <div className={`absolute bottom-0 left-1/4 right-0 h-48 bg-gradient-to-t ${sandColor2} rounded-t-full transform scale-x-125 opacity-70`}></div>
                    <div className={`absolute bottom-0 left-0 right-1/3 h-56 bg-gradient-to-t ${sandColor3} rounded-t-full opacity-60`}></div>
                    
                    <div className="absolute bottom-32 left-0 right-0 h-32 overflow-hidden">
                        <div className="animate-camel-walk flex gap-20">
                            {[...Array(8)].map((_, i) => (
                                <div key={i} className="flex flex-col items-center min-w-max">
                                    <div className="relative">
                                        <div className="w-16 h-10 bg-amber-700 rounded-full"></div>
                                        <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-3 w-8 h-8 bg-amber-800 rounded-full"></div>
                                        <div className="absolute -top-2 left-0 w-6 h-8 bg-amber-700 rounded-lg"></div>
                                        <div className="absolute top-2 right-0 w-2 h-6 bg-amber-800 rounded"></div>
                                        <div className="absolute bottom-0 left-2 w-1.5 h-6 bg-amber-900"></div>
                                        <div className="absolute bottom-0 left-6 w-1.5 h-6 bg-amber-900"></div>
                                        <div className="absolute bottom-0 right-6 w-1.5 h-6 bg-amber-900"></div>
                                        <div className="absolute bottom-0 right-2 w-1.5 h-6 bg-amber-900"></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="relative z-10 w-full max-w-6xl">
                        <h1 className="game-title text-4xl font-bold mb-3 text-amber-900 drop-shadow-lg text-center">
                            ÎèôÏò•Ïùò AI TETRIS
                        </h1>
                        
                        <div className="mb-2 flex gap-4 items-center justify-center">
                            <div className="text-xl text-amber-900 font-bold drop-shadow">Ï†êÏàò: {formatScore(score)}</div>
                            <div className="text-lg text-orange-800 font-bold drop-shadow">Ï†úÍ±∞Ìïú Ï§Ñ: {linesCleared}</div>
                        </div>

                        {!gameStarted && (
                            <div className="mb-3 flex flex-col items-center gap-3">
                                <div className="flex gap-2">
                                    {Object.entries(SPEED_OPTIONS).map(([key, { label }]) => (
                                        <button
                                            key={key}
                                            onClick={() => setSpeed(key)}
                                            className={`px-3 py-1.5 rounded-lg font-semibold text-sm ${
                                                speed === key 
                                                    ? 'bg-green-600 hover:bg-green-700' 
                                                    : 'bg-gray-600 hover:bg-gray-700'
                                            }`}
                                        >
                                            {label}
                                        </button>
                                    ))}
                                </div>
                                <div className="text-xs text-amber-900 font-semibold bg-yellow-200 px-2 py-0.5 rounded-full">
                                    üí° 20Ï§Ñ Ï†úÍ±∞Ìï† Í≤ΩÏö∞ 20% Speed-Up
                                </div>
                                
                                <div className="bg-gray-800 border-2 border-gray-700 rounded-lg p-3 text-xs max-w-md shadow-2xl">
                                    <div className="mb-2 font-semibold text-center text-sm">Ï°∞ÏûëÎ≤ï</div>
                                    <div className="grid grid-cols-2 gap-2">
                                        <div className="flex items-center gap-1.5">
                                            <div className="bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">‚Üê</div>
                                            <span>Ï¢åÏ∏° Ïù¥Îèô</span>
                                        </div>
                                        <div className="flex items-center gap-1.5">
                                            <div className="bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">‚Üí</div>
                                            <span>Ïö∞Ï∏° Ïù¥Îèô</span>
                                        </div>
                                        <div className="flex items-center gap-1.5">
                                            <div className="bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">‚Üë</div>
                                            <span>ÏãúÍ≥ÑÎ∞©Ìñ• ÌöåÏ†Ñ</span>
                                        </div>
                                        <div className="flex items-center gap-1.5">
                                            <div className="bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">‚Üì</div>
                                            <span>Î∞òÏãúÍ≥ÑÎ∞©Ìñ• ÌöåÏ†Ñ</span>
                                        </div>
                                        <div className="flex items-center gap-1.5">
                                            <div className="bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Space</div>
                                            <span>Ï¶âÏãú Îñ®Ïñ¥Îú®Î¶¨Í∏∞</span>
                                        </div>
                                        <div className="flex items-center gap-1.5 col-span-2 justify-center">
                                            <div className="bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">P</div>
                                            <span>ÏùºÏãúÏ†ïÏßÄ</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <button
                                    onClick={startGame}
                                    className="px-5 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-lg font-semibold"
                                >
                                    Í≤åÏûÑ ÏãúÏûë
                                </button>
                            </div>
                        )}

                        {gameStarted && (
                            <>
                                {showLevelUp && (
                                    <div className="mb-2 bg-orange-800 border-2 border-yellow-500 rounded-lg p-4 shadow-2xl">
                                        <div className="text-xl text-yellow-300 mb-3 font-bold">üéâ 20Ï§Ñ Îã¨ÏÑ±!</div>
                                        <div className="text-base mb-3">Î†àÎ≤®ÏùÑ Ïò¨Î¶¨ÏãúÍ≤†ÏäµÎãàÍπå?</div>
                                        <div className="flex gap-2 justify-center">
                                            <button
                                                onClick={continueGame}
                                                className="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold text-sm"
                                            >
                                                Í∞ôÏùÄ ÏÜçÎèÑÎ°ú Í≥ÑÏÜçÌïòÍ∏∞
                                            </button>
                                            <button
                                                onClick={increaseSpeed}
                                                className="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-semibold text-sm"
                                            >
                                                ÏÜçÎèÑ 20% Ïò¨Î¶¨Í∏∞ üöÄ
                                            </button>
                                        </div>
                                    </div>
                                )}

                                {isPaused && !showLevelUp && (
                                    <div className="mb-2 text-lg text-yellow-400">ÏùºÏãúÏ†ïÏßÄ</div>
                                )}

                                {gameOver && (
                                    <div className="mb-2 flex gap-2 justify-center">
                                        <button
                                            onClick={startGame}
                                            className="px-4 py-1.5 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm"
                                        >
                                            Îã§Ïãú ÏãúÏûë
                                        </button>
                                        <button
                                            onClick={resetGame}
                                            className="px-4 py-1.5 bg-gray-600 hover:bg-gray-700 rounded-lg text-sm"
                                        >
                                            Î©îÏù∏ÏúºÎ°ú
                                        </button>
                                    </div>
                                )}

                                {!gameOver && !showLevelUp && (
                                    <div className="mb-2 flex gap-2 justify-center">
                                        <button
                                            onClick={startGame}
                                            className="px-3 py-1.5 bg-green-600 hover:bg-green-700 rounded-lg font-semibold text-sm"
                                        >
                                            ÏÉà Í≤åÏûÑ
                                        </button>
                                        <button
                                            onClick={resetGame}
                                            className="px-3 py-1.5 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-sm"
                                        >
                                            Í≤åÏûÑ Ï∑®ÏÜå
                                        </button>
                                    </div>
                                )}

                                <div className="flex gap-4 items-start justify-center">
                                    <div className="relative">
                                        <div 
                                            className="border-4 border-gray-700 bg-gray-800"
                                            style={{ 
                                                display: 'grid',
                                                gridTemplateColumns: `repeat(${BOARD_WIDTH}, ${CELL_SIZE}px)`,
                                                gap: '1px'
                                            }}
                                        >
                                            {renderBoard().map((row, y) =>
                                                row.map((cell, x) => (
                                                    <div
                                                        key={`${y}-${x}`}
                                                        className={`${cell || 'bg-gray-900'} border border-gray-700 ${gameOverAnimation ? 'block-fall' : ''}`}
                                                        style={{ 
                                                            width: CELL_SIZE, 
                                                            height: CELL_SIZE,
                                                            animationDelay: gameOverAnimation ? `${y * 0.05}s` : '0s'
                                                        }}
                                                    />
                                                ))
                                            )}
                                        </div>
                                        {gameOver && (
                                            <div className="absolute inset-0 flex items-center justify-center">
                                                <div className="game-over-text text-4xl font-bold text-red-600 bg-black bg-opacity-50 px-6 py-3 rounded-lg">
                                                    GAME OVER
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    <div className="flex flex-col gap-3">
                                        {nextPiece && (
                                            <div className="flex flex-col items-center">
                                                <div className="text-sm font-semibold mb-1">Îã§Ïùå Î∏îÎ°ù</div>
                                                <div 
                                                    className="border-2 border-gray-700 bg-gray-800 p-2"
                                                    style={{ 
                                                        display: 'grid',
                                                        gridTemplateColumns: `repeat(4, ${CELL_SIZE}px)`,
                                                        gap: '1px'
                                                    }}
                                                >
                                                    {Array.from({ length: 4 }).map((_, y) =>
                                                        Array.from({ length: 4 }).map((_, x) => {
                                                            const pieceY = y - Math.floor((4 - nextPiece.shape.length) / 2);
                                                            const pieceX = x - Math.floor((4 - nextPiece.shape[0].length) / 2);
                                                            const isActive = 
                                                                pieceY >= 0 && 
                                                                pieceY < nextPiece.shape.length && 
                                                                pieceX >= 0 && 
                                                                pieceX < nextPiece.shape[0].length && 
                                                                nextPiece.shape[pieceY][pieceX];
                                                            
                                                            return (
                                                                <div
                                                                    key={`${y}-${x}`}
                                                                    className={`${isActive ? nextPiece.color : 'bg-gray-900'} rounded-md`}
                                                                    style={{ 
                                                                        width: CELL_SIZE, 
                                                                        height: CELL_SIZE 
                                                                    }}
                                                                />
                                                            );
                                                        })
                                                    )}
                                                </div>
                                            </div>
                                        )}
                                        
                                        <div className="flex flex-col items-center">
                                            <svg 
                                                width="60" 
                                                height="60" 
                                                viewBox="0 0 100 100"
                                                className="wheel-spin"
                                                style={{ '--spin-speed': `${2 / getWheelSpeed()}s` }}
                                            >
                                                <circle cx="50" cy="50" r="40" fill="none" stroke="#64748b" strokeWidth="8"/>
                                                <line x1="50" y1="10" x2="50" y2="90" stroke="#64748b" strokeWidth="3"/>
                                                <line x1="10" y1="50" x2="90" y2="50" stroke="#64748b" strokeWidth="3"/>
                                                <line x1="21" y1="21" x2="79" y2="79" stroke="#64748b" strokeWidth="3"/>
                                                <line x1="79" y1="21" x2="21" y2="79" stroke="#64748b" strokeWidth="3"/>
                                                <circle cx="50" cy="50" r="10" fill="#475569"/>
                                            </svg>
                                        </div>

                                        <div className="text-center text-xs bg-gray-800 bg-opacity-80 p-2 rounded-lg">
                                            <div className="mb-1 font-semibold text-xs">Ï°∞ÏûëÎ≤ï</div>
                                            <div className="text-xs">‚Üê ‚Üí Ï¢åÏö∞Ïù¥Îèô</div>
                                            <div className="text-xs">‚Üë ÏãúÍ≥ÑÌöåÏ†Ñ</div>
                                            <div className="text-xs">‚Üì Î∞òÏãúÍ≥ÑÌöåÏ†Ñ</div>
                                            <div className="text-xs">Space Ï¶âÏãú</div>
                                            <div className="text-xs">P ÏùºÏãúÏ†ïÏßÄ</div>
                                        </div>
                                    </div>
                                </div>

                                <div className="mt-6 text-center text-sm bg-gray-800 bg-opacity-80 p-4 rounded-lg shadow-lg">
                                    <div className="mb-2 font-semibold">Ï°∞ÏûëÎ≤ï:</div>
                                    <div>‚Üê ‚Üí : Ï¢åÏö∞ Ïù¥Îèô</div>
                                    <div>‚Üë : ÏãúÍ≥ÑÎ∞©Ìñ• ÌöåÏ†Ñ</div>
                                    <div>‚Üì : Î∞òÏãúÍ≥ÑÎ∞©Ìñ• ÌöåÏ†Ñ</div>
                                    <div>Space : Ï¶âÏãú Îñ®Ïñ¥Îú®Î¶¨Í∏∞</div>
                                    <div>P : ÏùºÏãúÏ†ïÏßÄ</div>
                                </div>
                            </>
                        )}
                    </div>
                    
                    {/* Í∞úÎ∞úÏûê Ï†ïÎ≥¥ */}
                    <div className="absolute bottom-4 right-4 text-xs text-amber-900 bg-yellow-100 bg-opacity-70 px-3 py-1 rounded-lg z-30">
                        Í∞úÎ∞úÏûê : Ïù¥ÎèôÏò• 2026.01.08
                    </div>
                </div>
            );
        };

        ReactDOM.render(<Tetris />, document.getElementById('root'));
    </script>
</body>
</html>